<mat-tab-group [(selectedIndex)]="currentTabIndex">
  <mat-tab>

    <ng-template mat-tab-label>
       Geral
       @if (isInEditMode && !generalInformationsValid) {
         <mat-icon class="red-circle-icon" color="warn">circle</mat-icon>
       }
    </ng-template>


    @if (!isInEditMode) {
      <app-general-informations [user]="userSelected" />
    } @else {
      <app-general-informations-edit
      [userForm]="userForm"
      [countriesList]="countriesList"
      [statesList]="statesList"
      (onCountrySelected)="onCountrySelected($event)"/>
    }

  </mat-tab>

  <mat-tab>
    <ng-template mat-tab-label>
      Contato
      @if (isInEditMode && !contactInformationsValid) {
        <mat-icon class="red-circle-icon" color="warn">circle</mat-icon>
      }
   </ng-template>


    @if (!isInEditMode) {
      <app-contact-informations [user]="userSelected" />
    } @else {
      <app-contact-informations-edit
      [userForm]="userForm"/>
    }
  </mat-tab>

  <mat-tab>
    <ng-template mat-tab-label>
      Dependente
      @if (isInEditMode && !dependentValid) {
        <mat-icon class="red-circle-icon" color="warn">circle</mat-icon>
      }
   </ng-template>

      @if (!isInEditMode) {
        <app-dependents-list
        [dependentsList]="userSelected?.dependentsList"
      />
    } @else {
      <app-dependents-list-edit
      [userForm]="userForm"
      (onRemoveDependent)="removeDependent($event)"
      (onAddDependent)="addDependent()"
      />
    }


  </mat-tab>
</mat-tab-group>
